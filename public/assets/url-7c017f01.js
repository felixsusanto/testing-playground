import{a as F,b as x}from"./beautify-0b9ec5a7.js";import{g as D}from"./_commonjsHelpers-042e6b4d.js";var $={},T=n=>encodeURIComponent(n).replace(/[!'()*]/g,s=>`%${s.charCodeAt(0).toString(16).toUpperCase()}`),I="%[a-f0-9]{2}",U=new RegExp(I,"gi"),N=new RegExp("("+I+")+","gi");function S(n,s){try{return decodeURIComponent(n.join(""))}catch{}if(n.length===1)return n;s=s||1;var i=n.slice(0,s),u=n.slice(s);return Array.prototype.concat.call([],S(i),S(u))}function B(n){try{return decodeURIComponent(n)}catch{for(var s=n.match(U),i=1;i<s.length;i++)n=S(s,i).join(""),s=n.match(U);return n}}function L(n){for(var s={"%FE%FF":"��","%FF%FE":"��"},i=N.exec(n);i;){try{s[i[0]]=decodeURIComponent(i[0])}catch{var u=B(i[0]);u!==i[0]&&(s[i[0]]=u)}i=N.exec(n)}s["%C2"]="�";for(var l=Object.keys(s),y=0;y<l.length;y++){var h=l[y];n=n.replace(new RegExp(h,"g"),s[h])}return n}var M=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return L(n)}},k=(n,s)=>{if(!(typeof n=="string"&&typeof s=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(s==="")return[n];const i=n.indexOf(s);return i===-1?[n]:[n.slice(0,i),n.slice(i+s.length)]};(function(n){const s=T,i=M,u=k,l=r=>r==null;function y(r){switch(r.arrayFormat){case"index":return e=>(a,t)=>{const f=a.length;return t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?a:t===null?[...a,[d(e,r),"[",f,"]"].join("")]:[...a,[d(e,r),"[",d(f,r),"]=",d(t,r)].join("")]};case"bracket":return e=>(a,t)=>t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?a:t===null?[...a,[d(e,r),"[]"].join("")]:[...a,[d(e,r),"[]=",d(t,r)].join("")];case"comma":case"separator":return e=>(a,t)=>t==null||t.length===0?a:a.length===0?[[d(e,r),"=",d(t,r)].join("")]:[[a,d(t,r)].join(r.arrayFormatSeparator)];default:return e=>(a,t)=>t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?a:t===null?[...a,d(e,r)]:[...a,[d(e,r),"=",d(t,r)].join("")]}}function h(r){let e;switch(r.arrayFormat){case"index":return(a,t,f)=>{if(e=/\[(\d*)\]$/.exec(a),a=a.replace(/\[\d*\]$/,""),!e){f[a]=t;return}f[a]===void 0&&(f[a]={}),f[a][e[1]]=t};case"bracket":return(a,t,f)=>{if(e=/(\[\])$/.exec(a),a=a.replace(/\[\]$/,""),!e){f[a]=t;return}if(f[a]===void 0){f[a]=[t];return}f[a]=[].concat(f[a],t)};case"comma":case"separator":return(a,t,f)=>{const o=typeof t=="string"&&t.includes(r.arrayFormatSeparator),c=typeof t=="string"&&!o&&g(t,r).includes(r.arrayFormatSeparator);t=c?g(t,r):t;const m=o||c?t.split(r.arrayFormatSeparator).map(R=>g(R,r)):t===null?t:g(t,r);f[a]=m};default:return(a,t,f)=>{if(f[a]===void 0){f[a]=t;return}f[a]=[].concat(f[a],t)}}}function b(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(r,e){return e.encode?e.strict?s(r):encodeURIComponent(r):r}function g(r,e){return e.decode?i(r):r}function j(r){return Array.isArray(r)?r.sort():typeof r=="object"?j(Object.keys(r)).sort((e,a)=>Number(e)-Number(a)).map(e=>r[e]):r}function E(r){const e=r.indexOf("#");return e!==-1&&(r=r.slice(0,e)),r}function q(r){let e="";const a=r.indexOf("#");return a!==-1&&(e=r.slice(a)),e}function O(r){r=E(r);const e=r.indexOf("?");return e===-1?"":r.slice(e+1)}function C(r,e){return e.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):e.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}function w(r,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),b(e.arrayFormatSeparator);const a=h(e),t=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return t;for(const f of r.split("&")){let[o,c]=u(e.decode?f.replace(/\+/g," "):f,"=");c=c===void 0?null:["comma","separator"].includes(e.arrayFormat)?c:g(c,e),a(g(o,e),c,t)}for(const f of Object.keys(t)){const o=t[f];if(typeof o=="object"&&o!==null)for(const c of Object.keys(o))o[c]=C(o[c],e);else t[f]=C(o,e)}return e.sort===!1?t:(e.sort===!0?Object.keys(t).sort():Object.keys(t).sort(e.sort)).reduce((f,o)=>{const c=t[o];return c&&typeof c=="object"&&!Array.isArray(c)?f[o]=j(c):f[o]=c,f},Object.create(null))}n.extract=O,n.parse=w,n.stringify=(r,e)=>{if(!r)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),b(e.arrayFormatSeparator);const a=c=>e.skipNull&&l(r[c])||e.skipEmptyString&&r[c]==="",t=y(e),f={};for(const c of Object.keys(r))a(c)||(f[c]=r[c]);const o=Object.keys(f);return e.sort!==!1&&o.sort(e.sort),o.map(c=>{const m=r[c];return m===void 0?"":m===null?d(c,e):Array.isArray(m)?m.reduce(t(c),[]).join("&"):d(c,e)+"="+d(m,e)}).filter(c=>c.length>0).join("&")},n.parseUrl=(r,e)=>{e=Object.assign({decode:!0},e);const[a,t]=u(r,"#");return Object.assign({url:a.split("?")[0]||"",query:w(O(r),e)},e&&e.parseFragmentIdentifier&&t?{fragmentIdentifier:g(t,e)}:{})},n.stringifyUrl=(r,e)=>{e=Object.assign({encode:!0,strict:!0},e);const a=E(r.url).split("?")[0]||"",t=n.extract(r.url),f=n.parse(t,{sort:!1}),o=Object.assign(f,r.query);let c=n.stringify(o,e);c&&(c=`?${c}`);let m=q(r.url);return r.fragmentIdentifier&&(m=`#${d(r.fragmentIdentifier,e)}`),`${a}${c}${m}`}})($);const p=D($);function A(n){return(n||"").replace(/[ \t]*[\n][ \t]*/g,`
`)}function H({markup:n,query:s}){return{markup:F.compressToEncodedURIComponent(A(n)),query:F.compressToEncodedURIComponent(A(s))}}function V({markup:n,query:s}){return{markup:x.html(F.decompressFromEncodedURIComponent(n||"")),query:x.js(F.decompressFromEncodedURIComponent(s||""))}}function z({markup:n,query:s}){const i=H({markup:n,query:s}),u=p.parse(window.location.search),l=p.stringify({...u,...i});history.replaceState(null,"",window.location.pathname+"?"+l)}function Q(){let n=p.parse(location.search);if(!n.markup&&!n.query&&(n=p.parse(location.hash)),!n.markup&&!n.query)return;const{markup:s,query:i}=V(n);return{markup:s,query:i}}const J={save:z,load:Q};export{H as c,p as q,J as u};
